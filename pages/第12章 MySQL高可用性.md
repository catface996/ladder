- 高可用性实际上意味着“更少的宕机时间”
- 什么是高可用性
  collapsed:: true
	- 5个9代表99.999%的正常使用时间。换句话说，每年只允许5分钟的宕机时间。
	- 可用性的效果和开销的比例并不是线性的。
	- 高可用性实际上是宕机造成的损失与降低宕机时间所花费的成本之间取一个平衡。
	- 2个9或者3个9的可用时间的目标并不困难。
- 导致宕机的原因
  collapsed:: true
	- “运行环境”是排名第一的宕机类别，大约占35%。
	- 性能问题也占35%
	- 复制占20%
	- 其余10%
	- 值得注意的地方：
		- 在运行环境问题中，最普遍的问题是磁盘空间耗尽。
		- 在性能问题中，最普遍的是糟糕的SQL。
		- 糟糕的schema和索引设计是第二大影响性能的问题。
		- 复制问题通常由于主备数据不一致导致。
		- 数据丢失问题通常是由于DROP TABLE的误操作导致。
- 如何实现高可用
  collapsed:: true
	- 提升平均失效时间（MTBF）
	- 降低平均恢复时间
		- 这里我们要反复提醒：所有宕机时间都是由多方面的失效联合在一起导致的。
- 避免单点失效
	- 共享存储或磁盘复制
		- [[SNA]]
		- [[DRBD]]
	- MySQL同步复制
		- MySQL Cluster
	- 基于复制的冗余
- 故障转移和故障恢复
	- 冗余是很好的技术，却不会增加可用性或者减少宕机
	- 故障转移就是一个双向过程：当服务器A失效，服务器B代替它，在修复服务器A后可以再替换回来。
	- 你需要确定故障转移到底需要多快，也需要知道在一次故障转移后替换一个失效的组件应该多快。
	- 提升备库或者切换角色
	- 虚拟IP地址或IP接管
	- 中间件解决方案
		- 可以使用代理、端口转发、网络地址转换或者硬件负载均衡来实现故障转移和故障恢复。
	- 在应用中处理故障转移