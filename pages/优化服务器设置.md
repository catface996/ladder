- MySQL配置的工作原理
- 什么不该做
- 创建MySQL配置文件
- 配置内存使用
	- MySQL可以使用多少内存
		- 受操作系统限制
		- 受glibc限制
	- 每个连接需要的内存
	- 为操作系统保留内存
	- 为缓存分配内存
		- InnoDB缓冲池
		- InnoDB日志文件和MyISAM数据的操作系统缓存
		- MyISAM键缓存
		- 查询缓存
		- 无法手工配置的缓存，例如二进制日志和表定义文件的操作系统缓存
	- InnoDB缓冲池（Buffer Pool）
	- 线程缓存
		- 每个线程占用256KB左右
	- 表缓存
		- 存储的是.frm文件的解析结果
	- InnoDB数据字典
- 配置MySQL的I/O行为
	- InnoDB I/O配置
		- InnoDB事务日志（Redo log）
		- 事务日志缓冲刷写到磁盘的时机：
			- 缓冲区满的时候
			- 事务提交的时候
			- 每一秒钟一次
		- 日志缓冲区建议设置为1M~8M
		- 日志缓冲区在刷新到磁盘的时候，会使用Mutex锁，锁住日志缓冲区。
		- 在某些极端场景下，可能丢失超过1秒的事务（innodb_flush_log_at_trx_commit=0 或 2）
		- “把日志缓冲写到日志文件”和“把日志刷新到持久存储”之间的不同是很重要的。在大部分操作系统中，把缓冲写到日志知识简单地把数据从InnoDB的内存缓冲转移到了操作系统的缓存，也就是内存里，并没有真的把数据写到持久存储。
		- InnoDB怎样打开和刷新日志以及数据文件
			- 使用innodb_flush_method选项可以配置InnoDB如何跟文件系统相互作用。
			- fdatasync
				- 在非windows系统上，InnoDB用fsync()来刷新数据和日志文件。
				- fsync()在操作系统层面也会有缓冲，这样就会有双重缓冲。
			- O_DIRECT
				- 这个设置依然使用fsync（）来刷新文件到磁盘，但是会通知操作系统不要缓存数据，也不要用预读。这个选项完全关闭了操作系统缓存，并且使所有的读和写都直接通过存储设备，避免了双重缓冲。
			- O_DSYNC
				- 这个选项使日志文件调用open（）函数时设置O_SYNC标记。它使得所有的写同步——换个说法，只有数据写到磁盘后写操作才返回。这个选项不影响数据文件。
				- O_SYNC标记和O_DIRECT标记的不同之处在于O_SYNC没有禁用操作系统层的缓存。
		- InnoDB表空间
			- InnoDB把数据保存在表空间内，本质上是一个由一个或多个磁盘文件组成的虚拟文件系统。InnoDB用表空间实现很多功能，并不只是存储表和索引。它还保存了回滚日志（旧版本行）、插入缓冲（Insert Buffer）、双写缓冲（Doublewrite Buffer，后面的章节里就会描述），以及其他内部数据结构。
- 配置MySQL并发
- 基于工作负载的配置
- 安全和稳定的设置
- 高级InnoDB设置
- 总结